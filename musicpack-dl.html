<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download latest music pack for Minecraft Bedrock</title>
    <style>
        /* Use default browser sans-serif font */
        body {
            font-family: sans-serif;
        }
    </style>
    <script>
        // Function to fetch release details from GitHub API
        function fetchReleaseDetails() {
    fetch('https://api.github.com/repos/mcpebd/musicpack/releases/latest')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(releaseData => {
            const tagName = releaseData.tag_name;
            const releaseDescription = releaseData.body || 'No description available';

            const codeBlockMatch = releaseDescription.match(/`([^`]+)`/);
            const targetVersion = codeBlockMatch ? codeBlockMatch[1] : "Unknown version";
            document.getElementById('targetVersion').textContent = targetVersion;

            const asset = releaseData.assets.find(a => a.name === 'musicpack.zip.mcpack');
            if (asset) {
                const sizeMB = (asset.size / (1024 * 1024)).toFixed(0);
                document.getElementById('downloadButtonContainer').innerHTML = `
                    <a href="${asset.browser_download_url}">
                        <button type="button">Download music pack (${sizeMB} MB)</button>
                    </a>
                `;
            } else {
                document.getElementById('downloadButtonContainer').textContent = 'File not found :(';
            }
        })
        .catch(error => {
            console.error('Error fetching release details:', error);
            document.getElementById('error').textContent = 'Failed to get details.';
        });
}

document.addEventListener('DOMContentLoaded', fetchReleaseDetails);

    </script>
</head>
<body>
    <h2><img src="https://github.com/user-attachments/assets/07835c2f-c98e-4351-9a00-cdf708bb741f" style="height: 1.2em; vertical-align: -15%; display: inline-block;">
        Download latest music pack for Minecraft Bedrock</h2>
    <p id="error" style="color: red;"></p>
    <p><b>Note:</b> Current music pack is for <b><span id="targetVersion">Loading...</span></b></p>
    <br>
    
    <p id="downloadButtonContainer">
        <button type="button" disabled>Getting download details...</button>
    </p>

    <p>
        <a href="https://github.com/mcpebd/musicpack/releases/">
            <button type="button">See older music packs</button>
        </a>
    </p>

    <br>
    <img src="https://img.shields.io/github/downloads/faizul726/oreui-utilities/total.svg?label=Lifetime downloads&color=blue">
    <p>Thank you and have a good day!</p>
</body>
</html>
